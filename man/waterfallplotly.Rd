% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tm_p_waterfall.R
\name{waterfallplotly}
\alias{waterfallplotly}
\title{Generate Waterfall Plotly Code}
\usage{
waterfallplotly(
  df,
  x_var,
  value_var,
  sort_var = NULL,
  color_var = NULL,
  colors,
  value_arbitrary_hlines = NULL,
  height = 600,
  title = "Waterfall plot",
  source,
  tooltip_vars = NULL
)
}
\arguments{
\item{df}{(\code{character(1)}) Name of the data frame to plot}

\item{x_var}{(\code{character(1)}) Name of the factor or character column to be used as x-axis (typically subject identifiers)}

\item{value_var}{(\code{character(1)}) Name of the numeric column to be used as y-axis (values determining bar heights)}

\item{sort_var}{(\code{character(1)} or \code{NULL}) Name of the column whose values determine sorting order. If \code{NULL} or same as \code{value_var}, sorts by value_var descending}

\item{color_var}{(\code{character(1)} or \code{NULL}) Name of the factor or character column to differentiate bar colors. If \code{NULL}, all bars have same color}

\item{colors}{(\code{character}) Named vector of colors for color_var levels}

\item{value_arbitrary_hlines}{(\code{numeric} or \code{NULL}) Values for horizontal reference lines}

\item{height}{(\code{numeric(1)}) Plot height in pixels}

\item{title}{(\code{character(1)}) Plot title}

\item{source}{(\code{character(1)}) Source identifier for plotly events}

\item{tooltip_vars}{(\code{character} or \code{NULL}) A vector of column names to be displayed in the tooltip.
If \code{NULL}, default tooltip is created showing subject, value, and color variables.}
}
\value{
A code expression that when evaluated creates a plotly plot object
}
\description{
Creates code expression that generates a waterfall plot with tooltips using plotly.
This function includes all the data manipulation and plot creation logic
from tm_p_waterfall module, including sorting, label extraction, tooltip generation,
bar chart creation, and horizontal reference lines.
}
\examples{
# Generate code for a waterfall plot
code <- waterfallplotly(
  df = "waterfall_data",
  x_var = "subject_id",
  value_var = "response_value",
  sort_var = "response_value",
  color_var = "response_category",
  colors = c("CR" = "green", "PR" = "blue", "SD" = "yellow", "PD" = "red"),
  value_arbitrary_hlines = c(20, -30),
  height = 600,
  title = "Response Waterfall Plot",
  source = "waterfall",
  tooltip_vars = c("subject_id", "response_category")
)

}
